{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'drawing/css/draw.css' %}">
{% endblock %}

{% block content %}
<div class="draw-app container-fluid p-0">

  <!-- ğŸ–¼ ìƒë‹¨ ë©”íƒ€ íˆ´ë°” -->


  <!-- ê¸°ì¡´ headerëŠ” toolbarë¡œ ëŒ€ì²´ -->
  <header style="background: #121821; box-shadow: 0 10px 30px rgba(0,0,0,.35); position: sticky; top: 0; z-index: 10;">
    <div class="toolbar d-flex flex-wrap align-items-center gap-2 p-2" style="background: #121821;">
      <div class="group d-flex align-items-center bg-dark p-2 rounded-3 shadow-sm">
        <button class="btn btn-sm btn-outline-light" id="penBtn" title="ë¸ŒëŸ¬ì‹œ (B)">âœï¸</button>
        <button class="btn btn-sm btn-outline-light" id="eraserBtn" title="ì§€ìš°ê°œ (E)">ğŸ§½</button>
        <span class="mx-2 text-secondary">|</span>
        <label for="color" class="form-label text-light mb-0 small">ìƒ‰ìƒ</label>
        <input type="color" id="color" value="#4ea1ff" class="form-control form-control-color me-2">
        <label for="size" class="form-label text-light mb-0 small">êµµê¸°</label>
        <input id="size" type="range" min="1" max="64" value="10" class="form-range me-2" style="width:100px;">
        <label for="opacity" class="form-label text-light mb-0 small">ë¶ˆíˆ¬ëª…</label>
        <input id="opacity" type="range" min="0.05" max="1" step="0.05" value="1" class="form-range me-2"
          style="width:100px;">
        <label for="bgcolor" class="form-label text-light mb-0 small">ë°°ê²½</label>
        <input type="color" id="bgcolor" value="#ffffff" class="form-control form-control-color me-2">
        <label for="bgInclude" class="form-check-label text-light small">ì €ì¥ í¬í•¨</label>
        <input type="checkbox" id="bgInclude" class="form-check-input" checked>
      </div>

      <div class="group d-flex align-items-center bg-dark p-2 rounded-3 shadow-sm">
        <label class="form-label text-light mb-0 small me-1">í¬ê¸°</label>
        <button class="btn btn-sm btn-outline-light" id="fitBtn" title="ì°½ ë§ì¶¤">ì°½ ë§ì¶¤</button>
        <button class="btn btn-sm btn-outline-light" id="squareBtn" title="ì •ì‚¬ê°í˜• ê³ ì •">ì •ì‚¬ê°í˜•</button>
        <button class="btn ok" style="display:none" id="gridBtn" title="ê²©ì í† ê¸€ (G)"># ê²©ì</button>
      </div>

      <div class="group d-flex align-items-center bg-dark p-2 rounded-3 shadow-sm">
        <button class="btn btn-sm btn-outline-secondary" id="undoBtn" title="ì‹¤í–‰ ì·¨ì†Œ">â†¶</button>
        <button class="btn btn-sm btn-outline-secondary" id="redoBtn" title="ë‹¤ì‹œ ì‹¤í–‰">â†·</button>
        <button class="btn btn-sm btn-danger" id="clearBtn" title="ì „ì²´ ì§€ìš°ê¸°">ğŸ—‘</button>

        <input id="uploadUrl" type="hidden" value="/drawing/create">
      </div>


      <div class="group">
        <label for="subject" class="form-label">ì£¼ì œ</label>
        <input type="text" class="meta-input" id="subject" value="{{ random_topic }}">
        <button id="refreshTopicBtn" class="btn ghost ms-2">ğŸ²</button>
      </div>

      <div class="group right">
        <button class="btn ok" id="saveBtn" title="PNG ì €ì¥">ğŸ’¾</button>
        <button class="btn primary" id="uploadBtn" title="ì„œë²„ ì—…ë¡œë“œ">â¬†</button>
      </div>

    </div>
  </header>



  <main class="canvas-wrap d-flex justify-content-center align-items-center position-relative flex-grow-1" id="stage"
    style="background:#0b0f14;">
    <canvas id="board" style="background:white; display:block;"></canvas>
    <div class="grid position-absolute top-0 start-0 w-100 h-100" id="grid" style="pointer-events:none;"></div>
  </main>

  <div class="hint position-fixed bottom-0 end-0 m-3 p-2 bg-dark small rounded">
    <kbd>Ctrl</kbd>+<kbd>Z</kbd> ë˜ëŒë¦¬ê¸° Â·
    <kbd>B</kbd> ë¸ŒëŸ¬ì‹œ Â· <kbd>E</kbd> ì§€ìš°ê°œ Â·
    <kbd>Ctrl</kbd>+<kbd>S</kbd> ì—…ë¡œë“œ
  </div>
</div>
{% endblock %}

{% block script %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="{% static 'drawing/js/draw.js' %}" ></script>
{% endblock %}